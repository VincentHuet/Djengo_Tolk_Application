.page-header
  %div
    .alert.alert-grey
      %h1= "#{t("la_langue")} #{@locales_name[current_translator.locale.name]}."
      .offset02= "De plus, les traductions sont effectuÃ©es par #{current_translator.name}"
    .span2.offset4
      .offset03
        = link_to t('create yml file'), locale_yml_files_path(@locale), :class => 'btn btn-large white'
%br
.alert.alert-grey
  %table.table#translation-table#back30
    %tr
      %td#normal
      %td
        %strong
          .span2= t("english_value")
      %td
        %strong
          .span2= t("translation")
      %td
        %strong
          .span3= t("create_date")
      %td
        %strong
          .span3= t("update_date")
      %td
        %strong
          .span2.offser05= t('Edit')
    - @create_and_update_date.sort.each do |key, date|
      - flag = 0
      - @translations.each do |translation|
        - if translation.need_updated? && translation.created_at.to_date != @latest_translation_load_date && translation.created_at.to_date.to_s == date.to_s
          - if flag <= 0
            %tr.alert.alert-error
              %td{:colspan => "6"}
                %i.icon-exclamation-sign
                %i.icon-exclamation-sign
                = t('still_to_do_since')
                = date
            - flag = 1
          %tr.alert.alert-error
            = render 'translation_row', :translation => translation
      - @translations.each do |translation|
        - if translation.need_updated? && translation.created_at.to_date == @latest_translation_load_date && @latest_translation_load_date.to_s == date.to_s
          - if flag <= 1
            %tr.alert.alert-warning
              %td{:colspan => "5"}
                %i.icon-question-sign
                %i.icon-exclamation-sign
                  = t('new_to_translate_since')
                  = @latest_translation_load_date
            - flag = 2
          %tr.alert.alert-warning
            = render 'translation_row', :translation => translation
      - @translations.each do |translation|
        - if !translation.need_updated? && translation.updated_at.to_date.to_s == date.to_s
          - if flag <= 2
            %tr.alert.alert-success
              %td{:colspan => "5"}
                %i.icon-ok-sign
                  = t('what_has_been_done_on')
                  = date
            - flag = 3
          %tr.alert.alert-success
            = render 'translation_row', :translation => translation



